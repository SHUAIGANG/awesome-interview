## 简述使用协程的优点

##### 什么是协程

​		协程是比线程更小的一种执行单元，你可以认为是轻量级的线程，协程解决了线程的两个问题：**一是系统线程会占用非常多的内存空间，二是过多的线程切换会占用大量的系统时间。**

​		协程运行在线程之上，当一个协程执行完成后，可以选择主动让出，让另一个协程运行在当前线程之上。**协程并没有增加线程数量，只是在线程的基础之上通过分时复用的方式运行多个协程**，而且协程的切换在用户态完成，切换的代价比线程从用户态到内核态的代价小很多。

​		协程只有和**异步IO**结合起来才能发挥出最大的威力。

##### 优点

​	协程是进程和线程的升级版,进程和线程都面临着内核态和用户态的切换问题而耗费许多切换时间，而协程就是用户自己控制切换的时机,不再需要陷入系统的内核态。

​	协程的执行效率非常高。因为子程序切换不是线程切换，而是由程序自身控制。因此，没有线程切换的开销，和多线程相比，线程数量越多，相同数量的协程体现出的优势越明显

​	不需要多线程的锁机制。由于只有一个线程，也不存在同时写变量的冲突，在协程中控制共享资源不需要加锁，只需要判断数据的状态，所以执行效率远高于线程 ，对于多核CPU可以使用**多进程+协程**来尽可能高效率地利用CPU。

##### 应用场景

​	协程的应用场景主要在于 ：I/O 密集型任务。

##### java支持

​	暂没有原生支持，开源模拟协程地址 ：https://github.com/kilim/kilim

##### Go例子

```go
func Add(x, y int) {
    z := x + y
    fmt.Println(z)
}
 
func main() {
    for i:=0; i<10; i++ {
        go Add(i, i)
    }
}
```

